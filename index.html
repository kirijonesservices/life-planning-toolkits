<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Calculators & Templates - Kiri Jones Services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            padding: 12px 24px;
            border: 2px solid #667eea;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        
        .back-button:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }
        
        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .toolkit-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .nav-button {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 24px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 30px;
            text-decoration: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }
        
        .nav-button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .resource-category {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .resource-category:hover {
            transform: translateY(-5px);
        }
        
        .category-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .smart-home { color: #4CAF50; }
        .finance { color: #2196F3; }
        .estate-planning { color: #9C27B0; }
        .integration { color: #FF9800; }
        
        .category-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .resource-list {
            list-style: none;
        }
        
        .resource-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.02);
            border-radius: 10px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .resource-item:hover {
            background: rgba(0,0,0,0.05);
            transform: translateX(5px);
        }
        
        .smart-home .resource-item { border-left-color: #4CAF50; }
        .finance .resource-item { border-left-color: #2196F3; }
        .estate-planning .resource-item { border-left-color: #9C27B0; }
        .integration .resource-item { border-left-color: #FF9800; }
        
        .resource-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #333;
        }
        
        .resource-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .resource-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .btn-calculator {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-download {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .calculator-modal, .template-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .close:hover {
            color: #333;
        }
        
        .calculator-form, .template-form {
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .calculate-btn, .generate-btn, .download-template-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .calculate-btn:hover, .generate-btn:hover, .download-template-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .results, .template-output {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 15px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .result-label {
            font-weight: bold;
            color: #333;
        }
        
        .result-value {
            font-weight: bold;
            color: #667eea;
        }
        
        .template-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        
        .template-section h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
        }
        
        .footer-back {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
            backdrop-filter: blur(20px);
        }
        
        .footer-back-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .footer-back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .toolkit-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
            }
            
            .back-button {
                position: relative;
                top: 10px;
                left: 10px;
                margin-bottom: 20px;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <a href="https://kirijonesservices.com" class="back-button">← Back to kirijonesservices.com</a>
    
    <div class="container">
        <div class="header">
            <h1>🔧 Toolkit Resources</h1>
            <p>Free Calculators & Templates to Transform Your Life</p>
            <div class="toolkit-nav">
                <a href="#smart-home" class="nav-button">🏠 Smart Home</a>
                <a href="#finance" class="nav-button">💰 Finance</a>
                <a href="#estate" class="nav-button">🏛️ Estate Planning</a>
                <a href="#integration" class="nav-button">🌟 Life Integration</a>
            </div>
        </div>

        <div class="resources-grid">
            <!-- Smart Home Resources -->
            <div class="resource-category smart-home" id="smart-home">
                <div class="category-icon">🏠</div>
                <h2 class="category-title">Smart Home Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Smart Home ROI Calculator</div>
                        <div class="resource-description">Calculate payback timeline and energy savings for your smart home investment</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('smartHomeROI')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Energy Savings Estimator</div>
                        <div class="resource-description">Estimate potential monthly and annual energy bill reductions</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('energySavings')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Device Compatibility Checker</div>
                        <div class="resource-description">Ensure your smart devices work together in one ecosystem</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('compatibility-checker')">Use Interactive Template</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Smart Home Budget Planner</div>
                        <div class="resource-description">Phase-by-phase investment planning by room and priority</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('smart-home-budget')">Use Interactive Template</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Finance Resources -->
            <div class="resource-category finance" id="finance">
                <div class="category-icon">💰</div>
                <h2 class="category-title">Financial Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Emergency Fund Calculator</div>
                        <div class="resource-description">Calculate your exact emergency fund target based on essential expenses</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('emergencyFund')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Debt Payoff Comparison</div>
                        <div class="resource-description">Compare snowball vs. avalanche methods with exact timelines</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('debtPayoff')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Net Worth Tracker</div>
                        <div class="resource-description">Track assets, liabilities, and net worth progress over time</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('net-worth-tracker')">Use Interactive Template</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Investment Allocation Calculator</div>
                        <div class="resource-description">Age-appropriate portfolio recommendations and rebalancing guide</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('investmentAllocation')">Use Calculator</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Estate Planning Resources -->
            <div class="resource-category estate-planning" id="estate">
                <div class="category-icon">🏛️</div>
                <h2 class="category-title">Estate Planning Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Life Insurance Needs Calculator</div>
                        <div class="resource-description">Determine optimal coverage using income replacement and debt methods</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('lifeInsurance')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Estate Tax Estimator</div>
                        <div class="resource-description">Calculate potential federal and state estate tax liability</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('estateTax')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Digital Asset Inventory</div>
                        <div class="resource-description">Complete spreadsheet for cataloging all digital assets and access</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('digital-assets')">Use Interactive Template</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Beneficiary Tracking Template</div>
                        <div class="resource-description">Keep all beneficiary designations updated across all accounts</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('beneficiary-tracking')">Use Interactive Template</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Integration Resources -->
            <div class="resource-category integration" id="integration">
                <div class="category-icon">🌟</div>
                <h2 class="category-title">Life Integration Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Complete Life Planning ROI</div>
                        <div class="resource-description">See how smart home, finance, and estate planning compound together</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('lifePlanningROI')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Cross-Category Savings Tracker</div>
                        <div class="resource-description">Automatically redirect smart home savings to financial goals</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('savings-tracker')">Use Interactive Template</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">12-Month Integrated Action Plan</div>
                        <div class="resource-description">Coordinated timeline for smart home, finance, and estate planning</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('integrated-action-plan')">Use Interactive Template</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Professional Team Contact Template</div>
                        <div class="resource-description">Organize all your advisors, contractors, and specialists</div>
                        <div class="resource-buttons">
                            <button class="btn btn-download" onclick="openTemplate('professional-team')">Use Interactive Template</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="footer-back">
            <p style="color: #666; margin-bottom: 20px;">Need more ghostwriting services?</p>
            <a href="https://kirijonesservices.com" class="footer-back-button">← Return to kirijonesservices.com</a>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div id="calculatorModal" class="calculator-modal">
        <div class="modal-content">
            <span class="close" onclick="closeCalculator()">&times;</span>
            <div id="calculatorContent">
                <!-- Calculator content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Template Modal -->
    <div id="templateModal" class="template-modal">
        <div class="modal-content">
            <span class="close" onclick="closeTemplate()">&times;</span>
            <div id="templateContent">
                <!-- Template content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Storage for template data
        let templateData = {};
        
        // Number formatting functions
        function formatNumber(num) {
            return new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(num);
        }
        
        function formatCurrency(num) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(num);
        }
        
        function parseFormattedNumber(str) {
            return parseFloat(str.replace(/[,$]/g, '')) || 0;
        }
        
        // Format input fields as user types
        function formatInputField(input, isCurrency = false) {
            let value = parseFormattedNumber(input.value);
            if (!isNaN(value)) {
                input.value = isCurrency ? formatCurrency(value).replace(', '') : formatNumber(value);
            }
        }

        // Calculator implementations
        function openCalculator(calculatorType) {
            const modal = document.getElementById('calculatorModal');
            const content = document.getElementById('calculatorContent');
            
            let calculatorHTML = '';
            
            switch(calculatorType) {
                case 'smartHomeROI':
                    calculatorHTML = `
                        <h2>Smart Home ROI Calculator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Initial Investment ($)</label>
                                <input type="text" id="investment" placeholder="5,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Monthly Energy Savings ($)</label>
                                <input type="text" id="monthlySavings" placeholder="150.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Annual Maintenance Cost ($)</label>
                                <input type="text" id="maintenance" placeholder="200.00" onblur="formatInputField(this, true)">
                            </div>
                            <button class="calculate-btn" onclick="calculateSmartHomeROI()">Calculate ROI</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'energySavings':
                    calculatorHTML = `
                        <h2>Energy Savings Estimator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Current Monthly Energy Bill ($)</label>
                                <input type="text" id="currentBill" placeholder="180.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Expected Savings Percentage (%)</label>
                                <input type="text" id="savingsPercent" placeholder="25.00" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Home Square Footage</label>
                                <input type="text" id="squareFootage" placeholder="2,000.00" onblur="formatInputField(this)">
                            </div>
                            <button class="calculate-btn" onclick="calculateEnergySavings()">Calculate Savings</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'emergencyFund':
                    calculatorHTML = `
                        <h2>Emergency Fund Calculator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Monthly Essential Expenses ($)</label>
                                <input type="text" id="monthlyExpenses" placeholder="3,500.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Target Months of Coverage</label>
                                <input type="text" id="targetMonths" placeholder="6.00" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Current Emergency Fund Balance ($)</label>
                                <input type="text" id="currentBalance" placeholder="5,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <button class="calculate-btn" onclick="calculateEmergencyFund()">Calculate Target</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'debtPayoff':
                    calculatorHTML = `
                        <h2>Debt Payoff Comparison</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Total Debt Balance ($)</label>
                                <input type="text" id="totalDebt" placeholder="25,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Average Interest Rate (%)</label>
                                <input type="text" id="avgInterestRate" placeholder="18.50" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Monthly Payment Available ($)</label>
                                <input type="text" id="monthlyPayment" placeholder="800.00" onblur="formatInputField(this, true)">
                            </div>
                            <button class="calculate-btn" onclick="calculateDebtPayoff()">Compare Methods</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'investmentAllocation':
                    calculatorHTML = `
                        <h2>Investment Allocation Calculator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Your Age</label>
                                <input type="text" id="age" placeholder="35.00" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Total Investment Amount ($)</label>
                                <input type="text" id="totalInvestment" placeholder="100,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Risk Tolerance</label>
                                <select id="riskTolerance">
                                    <option value="conservative">Conservative</option>
                                    <option value="moderate" selected>Moderate</option>
                                    <option value="aggressive">Aggressive</option>
                                </select>
                            </div>
                            <button class="calculate-btn" onclick="calculateInvestmentAllocation()">Calculate Allocation</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'lifeInsurance':
                    calculatorHTML = `
                        <h2>Life Insurance Needs Calculator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Annual Income ($)</label>
                                <input type="text" id="annualIncome" placeholder="75,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Outstanding Debts ($)</label>
                                <input type="text" id="outstandingDebts" placeholder="150,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Years of Income Replacement</label>
                                <input type="text" id="incomeYears" placeholder="10.00" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Children's Education Fund ($)</label>
                                <input type="text" id="educationFund" placeholder="100,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <button class="calculate-btn" onclick="calculateLifeInsurance()">Calculate Coverage</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'estateTax':
                    calculatorHTML = `
                        <h2>Estate Tax Estimator</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Total Estate Value ($)</label>
                                <input type="text" id="estateValue" placeholder="5,000,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>State</label>
                                <select id="state">
                                    <option value="no-tax">No State Estate Tax</option>
                                    <option value="connecticut">Connecticut</option>
                                    <option value="hawaii">Hawaii</option>
                                    <option value="illinois">Illinois</option>
                                    <option value="maine">Maine</option>
                                    <option value="maryland">Maryland</option>
                                    <option value="massachusetts">Massachusetts</option>
                                    <option value="minnesota">Minnesota</option>
                                    <option value="new-york">New York</option>
                                    <option value="oregon">Oregon</option>
                                    <option value="rhode-island">Rhode Island</option>
                                    <option value="vermont">Vermont</option>
                                    <option value="washington">Washington</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Charitable Deductions ($)</label>
                                <input type="text" id="charitable" placeholder="0.00" onblur="formatInputField(this, true)">
                            </div>
                            <button class="calculate-btn" onclick="calculateEstateTax()">Calculate Tax</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                case 'lifePlanningROI':
                    calculatorHTML = `
                        <h2>Complete Life Planning ROI</h2>
                        <div class="calculator-form">
                            <div class="form-group">
                                <label>Smart Home Investment ($)</label>
                                <input type="text" id="smartHomeInvestment" placeholder="8,000.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Monthly Energy Savings ($)</label>
                                <input type="text" id="energySavingsROI" placeholder="200.00" onblur="formatInputField(this, true)">
                            </div>
                            <div class="form-group">
                                <label>Investment Return Rate (%)</label>
                                <input type="text" id="investmentReturn" placeholder="7.00" onblur="formatInputField(this)">
                            </div>
                            <div class="form-group">
                                <label>Years to Calculate</label>
                                <input type="text" id="timeHorizon" placeholder="20.00" onblur="formatInputField(this)">
                            </div>
                            <button class="calculate-btn" onclick="calculateLifePlanningROI()">Calculate Complete ROI</button>
                        </div>
                        <div id="results" class="results" style="display: none;"></div>
                    `;
                    break;
                    
                default:
                    calculatorHTML = '<h2>Calculator Coming Soon</h2><p>This calculator is under development.</p>';
            }
            
            content.innerHTML = calculatorHTML;
            modal.style.display = 'block';
        }

        // Calculator Functions
        function calculateSmartHomeROI() {
            const investment = parseFormattedNumber(document.getElementById('investment').value);
            const monthlySavings = parseFormattedNumber(document.getElementById('monthlySavings').value);
            const maintenance = parseFormattedNumber(document.getElementById('maintenance').value);
            
            if (!investment || !monthlySavings) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const annualSavings = (monthlySavings * 12) - maintenance;
            const paybackYears = investment / annualSavings;
            const fiveYearROI = ((annualSavings * 5) - investment) / investment * 100;
            const tenYearROI = ((annualSavings * 10) - investment) / investment * 100;
            
            const resultsHTML = `
                <h3>Smart Home ROI Results</h3>
                <div class="result-item">
                    <span class="result-label">Annual Net Savings:</span>
                    <span class="result-value">${formatCurrency(annualSavings)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Payback Period:</span>
                    <span class="result-value">${paybackYears.toFixed(1)} years</span>
                </div>
                <div class="result-item">
                    <span class="result-label">5-Year ROI:</span>
                    <span class="result-value">${fiveYearROI.toFixed(1)}%</span>
                </div>
                <div class="result-item">
                    <span class="result-label">10-Year ROI:</span>
                    <span class="result-value">${tenYearROI.toFixed(1)}%</span>
                </div>
            `;
            
            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').style.display = 'block';
        }

        function calculateEnergySavings() {
            const currentBill = parseFormattedNumber(document.getElementById('currentBill').value);
            const savingsPercent = parseFormattedNumber(document.getElementById('savingsPercent').value);
            const squareFootage = parseFormattedNumber(document.getElementById('squareFootage').value);
            
            if (!currentBill || !savingsPercent) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const monthlySavings = currentBill * (savingsPercent / 100);
            const annualSavings = monthlySavings * 12;
            const savingsPerSqFt = squareFootage ? (annualSavings / squareFootage) : 0;
            
            const resultsHTML = `
                <h3>Energy Savings Results</h3>
                <div class="result-item">
                    <span class="result-label">Monthly Savings:</span>
                    <span class="result-value">${formatCurrency(monthlySavings)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Annual Savings:</span>
                    <span class="result-value">${formatCurrency(annualSavings)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">New Monthly Bill:</span>
                    <span class="result-value">${formatCurrency(currentBill - monthlySavings)}</span>
                </div>
                ${squareFootage ? `
                <div class="result-item">
                    <span class="result-label">Savings per Sq Ft:</span>
                    <span class="result-value">${formatCurrency(savingsPerSqFt)}</span>
                </div>` : ''}
            `;
            
            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').style.display = 'block';
        }

        function calculateEmergencyFund() {
            const monthlyExpenses = parseFormattedNumber(document.getElementById('monthlyExpenses').value);
            const targetMonths = parseFormattedNumber(document.getElementById('targetMonths').value);
            const currentBalance = parseFormattedNumber(document.getElementById('currentBalance').value);
            
            if (!monthlyExpenses || !targetMonths) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const targetAmount = monthlyExpenses * targetMonths;
            const shortfall = Math.max(0, targetAmount - currentBalance);
            const currentCoverage = currentBalance / monthlyExpenses;
            
            const resultsHTML = `
                <h3>Emergency Fund Results</h3>
                <div class="result-item">
                    <span class="result-label">Target Fund Amount:</span>
                    <span class="result-value">${formatCurrency(targetAmount)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Current Coverage:</span>
                    <span class="result-value">${currentCoverage.toFixed(1)} months</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Remaining to Save:</span>
                    <span class="result-value">${formatCurrency(shortfall)}</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Progress:</span>
                    <span class="result-value">${((currentBalance / targetAmount) * 100).toFixed(1)}% Complete</span>
                </div>
            `;
            
            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').style.display = 'block';
        }

        function calculateDebtPayoff() {
            const totalDebt = parseFormattedNumber(document.getElementById('totalDebt').value);
