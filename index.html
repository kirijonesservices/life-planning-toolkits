<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>Last Updated</label>
                                    <input type="date" />
                                </div>
                                <div class="form-group">
                                    <label>Next Review Date</label>
                                    <input type="date" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addBeneficiaryEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Another Account</button>
                </div>
            `;
        }

        function createSavingsForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #e1f5fe; border-radius: 10px;">
                        <h4 style="margin-bottom: 15px;">üí° Savings Flow Strategy</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div class="form-group">
                                <label>Monthly Smart Home Savings ($)</label>
                                <input type="number" id="monthlySavings" placeholder="37" onchange="updateSavingsProjection()" />
                            </div>
                            <div class="form-group">
                                <label>Priority 1: Emergency Fund Target ($)</label>
                                <input type="number" id="emergencyTarget" placeholder="10,000" />
                            </div>
                            <div class="form-group">
                                <label>Priority 2: Debt Balance ($)</label>
                                <input type="number" id="debtTarget" placeholder="15,000" />
                            </div>
                            <div class="form-group">
                                <label>Priority 3: Investment Goal ($)</label>
                                <input type="number" id="investmentTarget" placeholder="25,000" />
                            </div>
                        </div>
                        <div id="savingsProjection" style="margin-top: 15px; padding: 10px; background: white; border-radius: 5px;">
                            <strong>Projected Timeline:</strong> <span id="projectionText">Enter your monthly savings to see timeline</span>
                        </div>
                    </div>
                    
                    <div id="savingsEntries">
                        <div class="savings-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Month 1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Energy Savings ($)</label>
                                    <input type="number" placeholder="27" onchange="updateMonthlySavingsTotal(this)" />
                                </div>
                                <div class="form-group">
                                    <label>Insurance Savings ($)</label>
                                    <input type="number" placeholder="10" onchange="updateMonthlySavingsTotal(this)" />
                                </div>
                                <div class="form-group">
                                    <label>Other Savings ($)</label>
                                    <input type="number" placeholder="0" onchange="updateMonthlySavingsTotal(this)" />
                                </div>
                                <div class="form-group">
                                    <label>Total Monthly Savings</label>
                                    <input type="number" readonly class="monthly-total" style="background: #f0f0f0;" />
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>To Debt Payment ($)</label>
                                    <input type="number" placeholder="37" />
                                </div>
                                <div class="form-group">
                                    <label>To Emergency Fund ($)</label>
                                    <input type="number" placeholder="0" />
                                </div>
                                <div class="form-group">
                                    <label>To Investments ($)</label>
                                    <input type="number" placeholder="0" />
                                </div>
                                <div class="form-group">
                                    <label>Running Debt Balance</label>
                                    <input type="number" placeholder="14,963" style="background: #fff3e0;" />
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Notes</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Focus all savings on high-interest debt first"></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addSavingsMonth()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Next Month</button>
                </div>
            `;
        }

        function createActionPlanForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #fff8e1; border-radius: 10px;">
                        <h4 style="margin-bottom: 15px;">üéØ 12-Month Integration Strategy</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div class="form-group">
                                <label>Total Budget Available ($)</label>
                                <input type="number" id="totalActionBudget" placeholder="5,000" />
                            </div>
                            <div class="form-group">
                                <label>Priority Focus</label>
                                <select id="primaryFocus">
                                    <option>Debt Elimination</option>
                                    <option>Wealth Building</option>
                                    <option>Risk Management</option>
                                    <option>Balanced Approach</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Current Debt ($)</label>
                                <input type="number" placeholder="15,000" />
                            </div>
                            <div class="form-group">
                                <label>Emergency Fund Goal ($)</label>
                                <input type="number" placeholder="12,000" />
                            </div>
                        </div>
                    </div>
                    
                    <div id="actionPlanEntries">
                        <div class="action-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Month 1 Action Plan</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                                <div class="form-group">
                                    <label>üè† Smart Home Action</label>
                                    <textarea style="width: 100%; padding: 10px; border: 2px solid #4CAF50; border-radius: 5px; resize: vertical;" rows="3" placeholder="Install smart thermostat and smart lighting in main areas"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>üí∞ Finance Action</label>
                                    <textarea style="width: 100%; padding: 10px; border: 2px solid #2196F3; border-radius: 5px; resize: vertical;" rows="3" placeholder="Set up automatic debt payment increase using energy savings"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>üèõÔ∏è Estate Planning Action</label>
                                    <textarea style="width: 100%; padding: 10px; border: 2px solid #9C27B0; border-radius: 5px; resize: vertical;" rows="3" placeholder="Research estate planning attorneys and schedule consultation"></textarea>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>Estimated Cost ($)</label>
                                    <input type="number" placeholder="500" />
                                </div>
                                <div class="form-group">
                                    <label>Expected Savings Start</label>
                                    <select>
                                        <option>Immediate</option>
                                        <option>Month 2</option>
                                        <option>Month 3</option>
                                        <option>Quarter 2</option>
                                        <option>Quarter 3</option>
                                        <option>Quarter 4</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <select>
                                        <option>Planning</option>
                                        <option>In Progress</option>
                                        <option>Completed</option>
                                        <option>Delayed</option>
                                        <option>Cancelled</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Integration Notes</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #FF9800; border-radius: 5px; resize: vertical;" rows="2" placeholder="How do these actions work together? What dependencies exist?"></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addActionMonth()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Next Month</button>
                </div>
            `;
        }

        function createProfessionalTeamForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #f1f8e9; border-radius: 10px;">
                        <h4 style="margin-bottom: 15px;">üë• Professional Team Overview</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Estate Planning Attorney</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Financial Advisor</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Tax Professional</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Insurance Agent</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Smart Home Installer</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Annual Team Meeting Scheduled</label>
                        </div>
                    </div>
                    
                    <div id="professionalEntries">
                        <div class="professional-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Professional #1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Professional Type</label>
                                    <select>
                                        <option>Estate Planning Attorney</option>
                                        <option>Financial Advisor</option>
                                        <option>Tax Professional/CPA</option>
                                        <option>Insurance Agent</option>
                                        <option>Smart Home Installer</option>
                                        <option>Electrician</option>
                                        <option>HVAC Technician</option>
                                        <option>Mortgage Lender</option>
                                        <option>Real Estate Agent</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" placeholder="John Attorney" />
                                </div>
                                <div class="form-group">
                                    <label>Company</label>
                                    <input type="text" placeholder="Smith & Associates Law Firm" />
                                </div>
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="tel" placeholder="(555) 123-4567" />
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" placeholder="john@lawfirm.com" />
                                </div>
                                <div class="form-group">
                                    <label>Specialization</label>
                                    <input type="text" placeholder="Wills & Trusts" />
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>Last Contact</label>
                                    <input type="date" />
                                </div>
                                <div class="form-group">
                                    <label>Next Scheduled</label>
                                    <input type="date" />
                                </div>
                                <div class="form-group">
                                    <label>Annual Fee ($)</label>
                                    <input type="number" placeholder="2,500" />
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Services Used</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Will preparation, trust setup, annual review"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Notes</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Preferred communication method, special instructions, etc."></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addProfessionalEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Another Professional</button>
                </div>
            `;
        }

        // Dynamic form entry functions
        function addDeviceEntry() {
            const container = document.getElementById('deviceEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'device-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Device #${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Device Name</label>
                        <input type="text" placeholder="Smart Light Switch" />
                    </div>
                    <div class="form-group">
                        <label>Brand</label>
                        <input type="text" placeholder="Kasa" />
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select>
                            <option>Climate</option>
                            <option>Lighting</option>
                            <option>Security</option>
                            <option>Entertainment</option>
                            <option>Appliances</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Protocol</label>
                        <select>
                            <option>WiFi</option>
                            <option>Zigbee</option>
                            <option>Z-Wave</option>
                            <option>Thread</option>
                            <option>Bluetooth</option>
                            <option>Matter</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Price ($)</label>
                        <input type="number" placeholder="45" />
                    </div>
                    <div class="form-group">
                        <label>Compatible With</label>
                        <input type="text" placeholder="Alexa, Google" />
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Notes</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Installation notes, compatibility issues, etc."></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Device</button>
            `;
            container.appendChild(newEntry);
        }

        function addBudgetEntry() {
            const container = document.getElementById('budgetEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'budget-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Item #${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Phase</label>
                        <select onchange="updateBudgetTotals()">
                            <option value="1">Phase 1</option>
                            <option value="2">Phase 2</option>
                            <option value="3">Phase 3</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Room/Area</label>
                        <input type="text" placeholder="Kitchen" />
                    </div>
                    <div class="form-group">
                        <label>Device Category</label>
                        <select>
                            <option>Lighting</option>
                            <option>Climate</option>
                            <option>Security</option>
                            <option>Entertainment</option>
                            <option>Appliances</option>
                            <option>Hub/Controller</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Specific Device</label>
                        <input type="text" placeholder="Smart Outlets (4)" />
                    </div>
                    <div class="form-group">
                        <label>Cost ($)</label>
                        <input type="number" placeholder="80" onchange="updateBudgetTotals()" />
                    </div>
                    <div class="form-group">
                        <label>Priority (1-5)</label>
                        <select>
                            <option value="5">5 - Critical</option>
                            <option value="4">4 - High</option>
                            <option value="3">3 - Medium</option>
                            <option value="2">2 - Low</option>
                            <option value="1">1 - Nice to have</option>
                        </select>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>Timeline</label>
                        <input type="text" placeholder="Month 4" />
                    </div>
                    <div class="form-group">
                        <label>ROI Timeline</label>
                        <input type="text" placeholder="Variable" />
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Notes</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Installation requirements, compatibility notes, etc."></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Item</button>
            `;
            container.appendChild(newEntry);
        }

        function addAssetEntry() {
            const container = document.getElementById('assetEntries');
            const newEntry = document.createElement('div');
            newEntry.className = 'asset-entry';
            newEntry.style.cssText = 'border: 1px solid #4CAF50; padding: 15px; margin-bottom: 15px; border-radius: 10px; background: #f1f8e9;';
            newEntry.innerHTML = `
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px;">
                    <div class="form-group">
                        <label>Asset Description</label>
                        <input type="text" placeholder="Investment Account" />
                    </div>
                    <div class="form-group">
                        <label>Value ($)</label>
                        <input type="number" placeholder="25,000" onchange="updateNetWorth()" />
                    </div>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select>
                        <option>Real Estate</option>
                        <option>Investment Account</option>
                        <option>Retirement Account</option>
                        <option>Cash & Savings</option>
                        <option>Vehicles</option>
                        <option>Personal Property</option>
                        <option>Other Assets</option>
                    </select>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Asset</button>
            `;
            container.appendChild(newEntry);
        }

        function addLiabilityEntry() {
            const container = document.getElementById('liabilityEntries');
            const newEntry = document.createElement('div');
            newEntry.className = 'liability-entry';
            newEntry.style.cssText = 'border: 1px solid #f44336; padding: 15px; margin-bottom: 15px; border-radius: 10px; background: #ffebee;';
            newEntry.innerHTML = `
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px;">
                    <div class="form-group">
                        <label>Debt Description</label>
                        <input type="text" placeholder="Credit Card" />
                    </div>
                    <div class="form-group">
                        <label>Balance ($)</label>
                        <input type="number" placeholder="5,000" onchange="updateNetWorth()" />
                    </div>
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select>
                        <option>Mortgage</option>
                        <option>Credit Card</option>
                        <option>Auto Loan</option>
                        <option>Student Loan</option>
                        <option>Personal Loan</option>
                        <option>Other Debt</option>
                    </select>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Liability</button>
            `;
            container.appendChild(newEntry);
        }

        function addDigitalAssetEntry() {
            const container = document.getElementById('digitalAssetEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'digital-asset-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Digital Asset #${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Asset Type</label>
                        <select>
                            <option>Financial Account</option>
                            <option>Cryptocurrency</option>
                            <option>Social Media</option>
                            <option>Email Account</option>
                            <option>Cloud Storage</option>
                            <option>Subscription Service</option>
                            <option>Domain/Website</option>
                            <option>Digital Content</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Platform/Service</label>
                        <input type="text" placeholder="Instagram" />
                    </div>
                    <div class="form-group">
                        <label>Username/Account</label>
                        <input type="text" placeholder="johnsmith" />
                    </div>
                    <div class="form-group">
                        <label>Email Associated</label>
                        <input type="email" placeholder="john@email.com" />
                    </div>
                    <div class="form-group">
                        <label>Estimated Value ($)</label>
                        <input type="number" placeholder="0" />
                    </div>
                    <div class="form-group">
                        <label>2FA Method</label>
                        <select>
                            <option>Phone App</option>
                            <option>SMS</option>
                            <option>Email</option>
                            <option>Hardware Key</option>
                            <option>None</option>
                        </select>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>Password Location</label>
                        <input type="text" placeholder="Password Manager" />
                    </div>
                    <div class="form-group">
                        <label>Recovery Codes Location</label>
                        <input type="text" placeholder="Safe Deposit Box" />
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Beneficiary Access Plan</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="How will beneficiaries access this account? Special instructions?"></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Asset</button>
            `;
            container.appendChild(newEntry);
        }

        function addBeneficiaryEntry() {
            const container = document.getElementById('beneficiaryEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'beneficiary-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Account #${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Account Type</label>
                        <select>
                            <option>401k</option>
                            <option>IRA/Roth IRA</option>
                            <option>Life Insurance</option>
                            <option>Bank Account</option>
                            <option>Brokerage Account</option>
                            <option>Pension</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Institution</label>
                        <input type="text" placeholder="Fidelity" />
                    </div>
                    <div class="form-group">
                        <label>Account Number (Last 4)</label>
                        <input type="text" placeholder="****5678" />
                    </div>
                    <div class="form-group">
                        <label>Account Value ($)</label>
                        <input type="number" placeholder="25,000" />
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <h5 style="margin-bottom: 10px; color: #666;">Primary Beneficiary</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" placeholder="Jane Smith" />
                        </div>
                        <div class="form-group">
                            <label>Relationship</label>
                            <input type="text" placeholder="Spouse" />
                        </div>
                        <div class="form-group">
                            <label>Percentage</label>
                            <input type="number" placeholder="100" max="100" />
                        </div>
                        <div class="form-group">
                            <label>SSN (Last 4)</label>
                            <input type="text" placeholder="****5678" />
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <h5 style="margin-bottom: 10px; color: #666;">Contingent Beneficiary</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" placeholder="John Smith Jr" />
                        </div>
                        <div class="form-group">
                            <label>Relationship</label>
                            <input type="text" placeholder="Son" />
                        </div>
                        <div class="form-group">
                            <label>Percentage</label>
                            <input type="number" placeholder="100" max="100" />
                        </div>
                        <div class="form-group">
                            <label>SSN (Last 4)</label>
                            <input type="text" placeholder="****9012" />
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>Last Updated</label>
                        <input type="date" />
                    </div>
                    <div class="form-group">
                        <label>Next Review Date</label>
                        <input type="date" />
                    </div>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Account</button>
            `;
            container.appendChild(newEntry);
        }

        function addSavingsMonth() {
            const container = document.getElementById('savingsEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'savings-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Month ${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Energy Savings ($)</label>
                        <input type="number" placeholder="27" onchange="updateMonthlySavingsTotal(this)" />
                    </div>
                    <div class="form-group">
                        <label>Insurance Savings ($)</label>
                        <input type="number" placeholder="10" onchange="updateMonthlySavingsTotal(this)" />
                    </div>
                    <div class="form-group">
                        <label>Other Savings ($)</label>
                        <input type="number" placeholder="0" onchange="updateMonthlySavingsTotal(this)" />
                    </div>
                    <div class="form-group">
                        <label>Total Monthly Savings</label>
                        <input type="number" readonly class="monthly-total" style="background: #f0f0f0;" />
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>To Debt Payment ($)</label>
                        <input type="number" placeholder="37" />
                    </div>
                    <div class="form-group">
                        <label>To Emergency Fund ($)</label>
                        <input type="number" placeholder="0" />
                    </div>
                    <div class="form-group">
                        <label>To Investments ($)</label>
                        <input type="number" placeholder="0" />
                    </div>
                    <div class="form-group">
                        <label>Running Debt Balance</label>
                        <input type="number" placeholder="14,963" style="background: #fff3e0;" />
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Notes</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Progress notes, strategy adjustments, etc."></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Month</button>
            `;
            container.appendChild(newEntry);
        }

        function addActionMonth() {
            const container = document.getElementById('actionPlanEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'action-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Month ${entryCount} Action Plan</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>üè† Smart Home Action</label>
                        <textarea style="width: 100%; padding: 10px; border: 2px solid #4CAF50; border-radius: 5px; resize: vertical;" rows="3" placeholder="Smart switches in bedrooms"></textarea>
                    </div>
                    <div class="form-group">
                        <label>üí∞ Finance Action</label>
                        <textarea style="width: 100%; padding: 10px; border: 2px solid #2196F3; border-radius: 5px; resize: vertical;" rows="3" placeholder="Increase 401k contribution"></textarea>
                    </div>
                    <div class="form-group">
                        <label>üèõÔ∏è Estate Planning Action</label>
                        <textarea style="width: 100%; padding: 10px; border: 2px solid #9C27B0; border-radius: 5px; resize: vertical;" rows="3" placeholder="Review beneficiary designations"></textarea>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>Estimated Cost ($)</label>
                        <input type="number" placeholder="180" />
                    </div>
                    <div class="form-group">
                        <label>Expected Savings Start</label>
                        <select>
                            <option>Immediate</option>
                            <option>Month 2</option>
                            <option>Month 3</option>
                            <option>Quarter 2</option>
                            <option>Quarter 3</option>
                            <option>Quarter 4</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select>
                            <option>Planning</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                            <option>Delayed</option>
                            <option>Cancelled</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Integration Notes</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #FF9800; border-radius: 5px; resize: vertical;" rows="2" placeholder="How do these actions work together? Dependencies?"></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Month</button>
            `;
            container.appendChild(newEntry);
        }

        function addProfessionalEntry() {
            const container = document.getElementById('professionalEntries');
            const entryCount = container.children.length + 1;
            const newEntry = document.createElement('div');
            newEntry.className = 'professional-entry';
            newEntry.style.cssText = 'border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;';
            newEntry.innerHTML = `
                <h4 style="margin-bottom: 15px; color: #333;">Professional #${entryCount}</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Professional Type</label>
                        <select>
                            <option>Estate Planning Attorney</option>
                            <option>Financial Advisor</option>
                            <option>Tax Professional/CPA</option>
                            <option>Insurance Agent</option>
                            <option>Smart Home Installer</option>
                            <option>Electrician</option>
                            <option>HVAC Technician</option>
                            <option>Mortgage Lender</option>
                            <option>Real Estate Agent</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" placeholder="Sarah Financial Advisor" />
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" placeholder="Wealth Management Group" />
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" placeholder="(555) 234-5678" />
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" placeholder="sarah@wealthmgmt.com" />
                    </div>
                    <div class="form-group">
                        <label>Specialization</label>
                        <input type="text" placeholder="Retirement Planning" />
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div class="form-group">
                        <label>Last Contact</label>
                        <input type="date" />
                    </div>
                    <div class="form-group">
                        <label>Next Scheduled</label>
                        <input type="date" />
                    </div>
                    <div class="form-group">
                        <label>Annual Fee ($)</label>
                        <input type="number" placeholder="1,500" />
                    </div>
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <label>Services Used</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Portfolio review, retirement planning, quarterly meetings"></textarea>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Preferred communication method, special instructions, etc."></textarea>
                </div>
                <button type="button" onclick="removeEntry(this)" class="btn" style="background: #f44336; color: white; width: auto; margin-top: 10px;">Remove Professional</button>
            `;
            container.appendChild(newEntry);
        }

        // Utility functions for interactive templates
        function removeEntry(button) {
            const entry = button.closest('.device-entry, .budget-entry, .asset-entry, .liability-entry, .digital-asset-entry, .beneficiary-entry, .savings-entry, .action-entry, .professional-entry');
            if (entry) {
                entry.remove();
                updateBudgetTotals();
                updateNetWorth();
            }
        }

        function updateBudgetTotals() {
            const entries = document.querySelectorAll('.budget-entry');
            let phase1Total = 0, phase2Total = 0, phase3Total = 0;
            
            entries.forEach(entry => {
                const phase = entry.querySelector('select').value;
                const cost = parseFloat(entry.querySelector('input[type="number"]').value) || 0;
                
                if (phase === '1') phase1Total += cost;
                else if (phase === '2') phase2Total += cost;
                else if (phase === '3') phase3Total += cost;
            });
            
            const totalBudget = phase1Total + phase2Total + phase3Total;
            
            const phase1Element = document.getElementById('phase1Total');
            const phase2Element = document.getElementById('phase2Total');
            const phase3Element = document.getElementById('phase3Total');
            const totalElement = document.getElementById('totalBudget');
            
            if (phase1Element) phase1Element.textContent = formatCurrency(phase1Total);
            if (phase2Element) phase2Element.textContent = formatCurrency(phase2Total);
            if (phase3Element) phase3Element.textContent = formatCurrency(phase3Total);
            if (totalElement) totalElement.textContent = formatCurrency(totalBudget);
        }

        function updateNetWorth() {
            const assetInputs = document.querySelectorAll('.asset-entry input[type="number"]');
            const liabilityInputs = document.querySelectorAll('.liability-entry input[type="number"]');
            
            let totalAssets = 0;
            let totalLiabilities = 0;
            
            assetInputs.forEach(input => {
                totalAssets += parseFloat(input.value) || 0;
            });
            
            liabilityInputs.forEach(input => {
                totalLiabilities += parseFloat(input.value) || 0;
            });
            
            const netWorth = totalAssets - totalLiabilities;
            
            const assetsElement = document.getElementById('totalAssets');
            const liabilitiesElement = document.getElementById('totalLiabilities');
            const netWorthElement = document.getElementById('netWorth');
            
            if (assetsElement) assetsElement.textContent = formatCurrency(totalAssets);
            if (liabilitiesElement) liabilitiesElement.textContent = formatCurrency(totalLiabilities);
            if (netWorthElement) {
                netWorthElement.textContent = formatCurrency(netWorth);
                netWorthElement.style.color = netWorth >= 0 ? '#4CAF50' : '#f44336';
            }
        }

        function updateMonthlySavingsTotal(input) {
            const entry = input.closest('.savings-entry');
            const energySavings = parseFloat(entry.querySelector('input[placeholder="27"]').value) || 0;
            const insuranceSavings = parseFloat(entry.querySelector('input[placeholder="10"]').value) || 0;
            const otherSavings = parseFloat(entry.querySelector('input[placeholder="0"]').value) || 0;
            const total = energySavings + insuranceSavings + otherSavings;
            
            const totalInput = entry.querySelector('.monthly-total');
            if (totalInput) {
                totalInput.value = total;
            }
        }

        function updateSavingsProjection() {
            const monthlySavings = parseFloat(document.getElementById('monthlySavings').value) || 0;
            const emergencyTarget = parseFloat(document.getElementById('emergencyTarget').value) || 0;
            const debtTarget = parseFloat(document.getElementById('debtTarget').value) || 0;
            const investmentTarget = parseFloat(document.getElementById('investmentTarget').value) || 0;
            
            if (monthlySavings > 0) {
                const emergencyMonths = Math.ceil(emergencyTarget / monthlySavings);
                const debtMonths = Math.ceil(debtTarget / monthlySavings);
                const investmentMonths = Math.ceil(investmentTarget / monthlySavings);
                
                const projectionText = `Emergency Fund: ${emergencyMonths} months | Debt Payoff: ${debtMonths} months | Investment Goal: ${investmentMonths} months`;
                document.getElementById('projectionText').textContent = projectionText;
            }
        }

        function printTemplate() {
            // Hide buttons and non-essential elements for printing
            const buttons = document.querySelectorAll('.btn');
            const modal = document.querySelector('.calculator-modal');
            
            buttons.forEach(btn => btn.style.display = 'none');
            modal.style.background = 'white';
            
            // Print the page
            window.print();
            
            // Restore buttons after printing
            setTimeout(() => {
                buttons.forEach(btn => btn.style.display = 'inline-block');
                modal.style.background = 'rgba(0,0,0,0.7)';
            }, 1000);
        }

        function exportTemplateData(templateType) {
            let csvContent = '';
            const modal = document.querySelector('.modal-content');
            
            // Generate CSV based on template type
            switch(templateType) {
                case 'compatibility-checker':
                    csvContent = generateCompatibilityCSV();
                    break;
                case 'smart-home-budget':
                    csvContent = generateBudgetCSV();
                    break;
                case 'net-worth-tracker':
                    csvContent = generateNetWorthCSV();
                    break;
                case 'digital-assets':
                    csvContent = generateDigitalAssetsCSV();
                    break;
                case 'beneficiary-tracking':
                    csvContent = generateBeneficiaryCSV();
                    break;
                case 'savings-tracker':
                    csvContent = generateSavingsCSV();
                    break;
                case 'integrated-action-plan':
                    csvContent = generateActionPlanCSV();
                    break;
                case 'professional-team':
                    csvContent = generateProfessionalTeamCSV();
                    break;
            }
            
            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `${templateType}-data.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function generateCompatibilityCSV() {
            let csv = 'Device Name,Brand,Category,Protocol,Price,Compatible With,Notes\n';
            const entries = document.querySelectorAll('.device-entry');
            
            entries.forEach(entry => {
                const inputs = entry.querySelectorAll('input, select, textarea');
                const values = Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                });
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateBudgetCSV() {
            let csv = 'Phase,Room/Area,Device Category,Specific Device,Cost,Priority,Timeline,ROI Timeline,Notes\n';
            const entries = document.querySelectorAll('.budget-entry');
            
            entries.forEach(entry => {
                const inputs = entry.querySelectorAll('input, select, textarea');
                const values = Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                });
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateNetWorthCSV() {
            let csv = 'Type,Description,Category,Value\n';
            
            // Assets
            const assetEntries = document.querySelectorAll('.asset-entry');
            assetEntries.forEach(entry => {
                const description = entry.querySelector('input[placeholder*="Primary"], input[placeholder*="Investment"]').value || '';
                const category = entry.querySelector('select').value || '';
                const value = entry.querySelector('input[type="number"]').value || '0';
                csv += `"Asset","${description}","${category}","${value}"\n`;
            });
            
            // Liabilities
            const liabilityEntries = document.querySelectorAll('.liability-entry');
            liabilityEntries.forEach(entry => {
                const description = entry.querySelector('input[placeholder*="Primary"], input[placeholder*="Credit"]').value || '';
                const category = entry.querySelector('select').value || '';
                const value = entry.querySelector('input[type="number"]').value || '0';
                csv += `"Liability","${description}","${category}","${value}"\n`;
            });
            
            return csv;
        }

        function generateDigitalAssetsCSV() {
            let csv = 'Asset Type,Platform/Service,Username,Email,Value,2FA Method,Password Location,Recovery Codes,Beneficiary Access Plan\n';
            const entries = document.querySelectorAll('.digital-asset-entry');
            
            entries.forEach(entry => {
                const inputs = entry.querySelectorAll('input, select, textarea');
                const values = Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                });
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateBeneficiaryCSV() {
            let csv = 'Account Type,Institution,Account Number,Account Value,Primary Beneficiary,Primary Relationship,Primary %,Primary SSN,Contingent Beneficiary,Contingent Relationship,Contingent %,Contingent SSN,Last Updated,Next Review\n';
            const entries = document.querySelectorAll('.beneficiary-entry');
            
            entries.forEach(entry => {
                const inputs = entry.querySelectorAll('input, select');
                const values = Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                });
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateSavingsCSV() {
            let csv = 'Month,Energy Savings,Insurance Savings,Other Savings,Total Monthly,To Debt,To Emergency Fund,To Investments,Running Debt Balance,Notes\n';
            const entries = document.querySelectorAll('.savings-entry');
            
            entries.forEach((entry, index) => {
                const inputs = entry.querySelectorAll('input, textarea');
                const month = index + 1;
                const values = [month].concat(Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                }));
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateActionPlanCSV() {
            let csv = 'Month,Smart Home Action,Finance Action,Estate Planning Action,Estimated Cost,Expected Savings Start,Status,Integration Notes\n';
            const entries = document.querySelectorAll('.action-entry');
            
            entries.forEach((entry, index) => {
                const inputs = entry.querySelectorAll('input, select, textarea');
                const month = index + 1;
                const values = [month].concat(Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                }));
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function generateProfessionalTeamCSV() {
            let csv = 'Professional Type,Name,Company,Phone,Email,Specialization,Last Contact,Next Scheduled,Annual Fee,Services Used,Notes\n';
            const entries = document.querySelectorAll('.professional-entry');
            
            entries.forEach(entry => {
                const inputs = entry.querySelectorAll('input, select, textarea');
                const values = Array.from(inputs).map(input => {
                    let value = input.value || '';
                    return `"${value.replace(/"/g, '""')}"`;
                });
                csv += values.join(',') + '\n';
            });
            
            return csv;
        }

        function clearTemplateForm() {
            if (confirm('Are you sure you want to clear all form data? This cannot be undone.')) {
                const inputs = document.querySelectorAll('#calculatorContent input, #calculatorContent select, #calculatorContent textarea');
                inputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        input.checked = false;
                    } else {
                        input.value = '';
                    }
                });
                updateBudgetTotals();
                updateNetWorth();
                updateSavingsProjection();
            }
        }        // Template form creation functions
        function createCompatibilityForm() {
            return `
                <div class="template-form">
                    <div id="deviceEntries">
                        <div class="device-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Device #1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Device Name</label>
                                    <input type="text" placeholder="Smart Thermostat" />
                                </div>
                                <div class="form-group">
                                    <label>Brand</label>
                                    <input type="text" placeholder="Nest" />
                                </div>
                                <div class="form-group">
                                    <label>Category</label>
                                    <select>
                                        <option>Climate</option>
                                        <option>Lighting</option>
                                        <option>Security</option>
                                        <option>Entertainment</option>
                                        <option>Appliances</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Protocol</label>
                                    <select>
                                        <option>WiFi</option>
                                        <option>Zigbee</option>
                                        <option>Z-Wave</option>
                                        <option>Thread</option>
                                        <option>Bluetooth</option>
                                        <option>Matter</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Price ($)</label>
                                    <input type="number" placeholder="249" />
                                </div>
                                <div class="form-group">
                                    <label>Compatible With</label>
                                    <input type="text" placeholder="Google Assistant, Alexa" />
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Notes</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Installation notes, compatibility issues, etc."></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addDeviceEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Another Device</button>
                </div>
            `;
        }

        function createBudgetForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #e3f2fd; border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">Budget Summary</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                            <div><strong>Total Budget:</strong> <span id="totalBudget">$0</span></div>
                            <div><strong>Phase 1:</strong> <span id="phase1Total">$0</span></div>
                            <div><strong>Phase 2:</strong> <span id="phase2Total">$0</span></div>
                            <div><strong>Phase 3:</strong> <span id="phase3Total">$0</span></div>
                        </div>
                    </div>
                    <div id="budgetEntries">
                        <div class="budget-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Item #1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Phase</label>
                                    <select onchange="updateBudgetTotals()">
                                        <option value="1">Phase 1</option>
                                        <option value="2">Phase 2</option>
                                        <option value="3">Phase 3</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Room/Area</label>
                                    <input type="text" placeholder="Living Room" />
                                </div>
                                <div class="form-group">
                                    <label>Device Category</label>
                                    <select>
                                        <option>Lighting</option>
                                        <option>Climate</option>
                                        <option>Security</option>
                                        <option>Entertainment</option>
                                        <option>Appliances</option>
                                        <option>Hub/Controller</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Specific Device</label>
                                    <input type="text" placeholder="Smart LED Bulbs (4)" />
                                </div>
                                <div class="form-group">
                                    <label>Cost ($)</label>
                                    <input type="number" placeholder="120" onchange="updateBudgetTotals()" />
                                </div>
                                <div class="form-group">
                                    <label>Priority (1-5)</label>
                                    <select>
                                        <option value="5">5 - Critical</option>
                                        <option value="4">4 - High</option>
                                        <option value="3">3 - Medium</option>
                                        <option value="2">2 - Low</option>
                                        <option value="1">1 - Nice to have</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>Timeline</label>
                                    <input type="text" placeholder="Month 1" />
                                </div>
                                <div class="form-group">
                                    <label>ROI Timeline</label>
                                    <input type="text" placeholder="Immediate" />
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Notes</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="Installation requirements, compatibility notes, etc."></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addBudgetEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Another Item</button>
                </div>
            `;
        }

        function createNetWorthForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #e8f5e8; border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">Net Worth Summary</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                            <div><strong>Total Assets:</strong> <span id="totalAssets">$0</span></div>
                            <div><strong>Total Liabilities:</strong> <span id="totalLiabilities">$0</span></div>
                            <div><strong>Net Worth:</strong> <span id="netWorth" style="color: #4CAF50; font-size: 1.2em;">$0</span></div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                        <div>
                            <h3 style="color: #4CAF50; margin-bottom: 15px;">üí∞ Assets</h3>
                            <div id="assetEntries">
                                <div class="asset-entry" style="border: 1px solid #4CAF50; padding: 15px; margin-bottom: 15px; border-radius: 10px; background: #f1f8e9;">
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px;">
                                        <div class="form-group">
                                            <label>Asset Description</label>
                                            <input type="text" placeholder="Primary Residence" />
                                        </div>
                                        <div class="form-group">
                                            <label>Value ($)</label>
                                            <input type="number" placeholder="450,000" onchange="updateNetWorth()" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Category</label>
                                        <select>
                                            <option>Real Estate</option>
                                            <option>Investment Account</option>
                                            <option>Retirement Account</option>
                                            <option>Cash & Savings</option>
                                            <option>Vehicles</option>
                                            <option>Personal Property</option>
                                            <option>Other Assets</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button type="button" onclick="addAssetEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Asset</button>
                        </div>
                        
                        <div>
                            <h3 style="color: #f44336; margin-bottom: 15px;">üí≥ Liabilities</h3>
                            <div id="liabilityEntries">
                                <div class="liability-entry" style="border: 1px solid #f44336; padding: 15px; margin-bottom: 15px; border-radius: 10px; background: #ffebee;">
                                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px;">
                                        <div class="form-group">
                                            <label>Debt Description</label>
                                            <input type="text" placeholder="Primary Mortgage" />
                                        </div>
                                        <div class="form-group">
                                            <label>Balance ($)</label>
                                            <input type="number" placeholder="285,000" onchange="updateNetWorth()" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Category</label>
                                        <select>
                                            <option>Mortgage</option>
                                            <option>Credit Card</option>
                                            <option>Auto Loan</option>
                                            <option>Student Loan</option>
                                            <option>Personal Loan</option>
                                            <option>Other Debt</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <button type="button" onclick="addLiabilityEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Liability</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function createDigitalAssetsForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #fff3e0; border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">üîê Digital Asset Security Checklist</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Password Manager Setup</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> 2FA Enabled</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Recovery Codes Stored</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Beneficiary Access Planned</label>
                        </div>
                    </div>
                    
                    <div id="digitalAssetEntries">
                        <div class="digital-asset-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Digital Asset #1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Asset Type</label>
                                    <select>
                                        <option>Financial Account</option>
                                        <option>Cryptocurrency</option>
                                        <option>Social Media</option>
                                        <option>Email Account</option>
                                        <option>Cloud Storage</option>
                                        <option>Subscription Service</option>
                                        <option>Domain/Website</option>
                                        <option>Digital Content</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Platform/Service</label>
                                    <input type="text" placeholder="Bank of America" />
                                </div>
                                <div class="form-group">
                                    <label>Username/Account</label>
                                    <input type="text" placeholder="johnsmith" />
                                </div>
                                <div class="form-group">
                                    <label>Email Associated</label>
                                    <input type="email" placeholder="john@email.com" />
                                </div>
                                <div class="form-group">
                                    <label>Estimated Value ($)</label>
                                    <input type="number" placeholder="25,000" />
                                </div>
                                <div class="form-group">
                                    <label>2FA Method</label>
                                    <select>
                                        <option>Phone App</option>
                                        <option>SMS</option>
                                        <option>Email</option>
                                        <option>Hardware Key</option>
                                        <option>None</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                                <div class="form-group">
                                    <label>Password Location</label>
                                    <input type="text" placeholder="Password Manager" />
                                </div>
                                <div class="form-group">
                                    <label>Recovery Codes Location</label>
                                    <input type="text" placeholder="Safe Deposit Box" />
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Beneficiary Access Plan</label>
                                <textarea style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; resize: vertical;" rows="2" placeholder="How will beneficiaries access this account? Special instructions?"></textarea>
                            </div>
                        </div>
                    </div>
                    <button type="button" onclick="addDigitalAssetEntry()" class="btn btn-calculator" style="width: auto; margin: 10px 0;">+ Add Another Asset</button>
                </div>
            `;
        }

        function createBeneficiaryForm() {
            return `
                <div class="template-form">
                    <div style="margin-bottom: 20px; padding: 15px; background: #f3e5f5; border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">üìã Beneficiary Review Checklist</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> All accounts have primary beneficiaries</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> All accounts have contingent beneficiaries</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Beneficiary contact info is current</label>
                            <label style="display: flex; align-items: center;"><input type="checkbox" style="margin-right: 8px;"> Annual review scheduled</label>
                        </div>
                    </div>
                    
                    <div id="beneficiaryEntries">
                        <div class="beneficiary-entry" style="border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9;">
                            <h4 style="margin-bottom: 15px; color: #333;">Account #1</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="form-group">
                                    <label>Account Type</label>
                                    <select>
                                        <option>401k</option>
                                        <option>IRA/Roth IRA</option>
                                        <option>Life Insurance</option>
                                        <option>Bank Account</option>
                                        <option>Brokerage Account</option>
                                        <option>Pension</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Institution</label>
                                    <input type="text" placeholder="Vanguard" />
                                </div>
                                <div class="form-group">
                                    <label>Account Number (Last 4)</label>
                                    <input type="text" placeholder="****1234" />
                                </div>
                                <div class="form-group">
                                    <label>Account Value ($)</label>
                                    <input type="number" placeholder="75,000" />
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <h5 style="margin-bottom: 10px; color: #666;">Primary Beneficiary</h5>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" placeholder="Jane Smith" />
                                    </div>
                                    <div class="form-group">
                                        <label>Relationship</label>
                                        <input type="text" placeholder="Spouse" />
                                    </div>
                                    <div class="form-group">
                                        <label>Percentage</label>
                                        <input type="number" placeholder="100" max="100" />
                                    </div>
                                    <div class="form-group">
                                        <label>SSN (Last 4)</label>
                                        <input type="text" placeholder="****5678" />
                                    </div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <h5 style="margin-bottom: 10px; color: #666;">Contingent Beneficiary</h5>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" placeholder="John Smith Jr" />
                                    </div>
                                    <div class="form-group">
                                        <label>Relationship</label>
                                        <input type="text" placeholder="Son" />
                                    </div>
                                    <div class="form-group">
                                        <label>Percentage</label>
                                        <input type="number" placeholder="100" max="100" />
                                    </div>
                                    <div class="form-group">
                                        <label>SSN (Last 4)</label>
                                        <input type="text" placeholder="****9012" />
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Calculators & Templates - Kiri Jones Services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }
        
        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .toolkit-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .nav-button {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 24px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 30px;
            text-decoration: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            cursor: pointer;
        }
        
        .nav-button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .resource-category {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .resource-category:hover {
            transform: translateY(-5px);
        }
        
        .category-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .smart-home { color: #4CAF50; }
        .finance { color: #2196F3; }
        .estate-planning { color: #9C27B0; }
        .integration { color: #FF9800; }
        
        .category-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .resource-list {
            list-style: none;
        }
        
        .resource-item {
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0,0,0,0.02);
            border-radius: 10px;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .resource-item:hover {
            background: rgba(0,0,0,0.05);
            transform: translateX(5px);
        }
        
        .smart-home .resource-item { border-left-color: #4CAF50; }
        .finance .resource-item { border-left-color: #2196F3; }
        .estate-planning .resource-item { border-left-color: #9C27B0; }
        .integration .resource-item { border-left-color: #FF9800; }
        
        .resource-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #333;
        }
        
        .resource-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .resource-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .btn-calculator {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-download {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .calculator-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }
        
        .close:hover {
            color: #333;
        }
        
        .calculator-form {
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .calculate-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .results {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea20, #764ba220);
            border-radius: 15px;
            border: 1px solid #667eea40;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .result-label {
            font-weight: bold;
            color: #333;
        }
        
        .result-value {
            font-weight: bold;
            color: #667eea;
        }
        
        .contact-section {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-top: 40px;
            backdrop-filter: blur(20px);
        }
        
        .contact-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .contact-info {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
        }
        
        .contact-item {
            text-align: center;
        }
        
        .contact-icon {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .toolkit-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
            }
            
            .contact-info {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Toolkit Resources</h1>
            <p>Free Calculators & Templates to Transform Your Life</p>
            <div class="toolkit-nav">
                <a href="#smart-home" class="nav-button">üè† Smart Home</a>
                <a href="#finance" class="nav-button">üí∞ Finance</a>
                <a href="#estate" class="nav-button">üèõÔ∏è Estate Planning</a>
                <a href="#integration" class="nav-button">üåü Integration</a>
            </div>
        </div>

        <div class="resources-grid">
            <!-- Smart Home Resources -->
            <div class="resource-category smart-home" id="smart-home">
                <div class="category-icon">üè†</div>
                <h2 class="category-title">Smart Home Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Smart Home ROI Calculator</div>
                        <div class="resource-description">Calculate payback timeline and energy savings for your smart home investment</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('smartHomeROI')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Energy Savings Estimator</div>
                        <div class="resource-description">Estimate potential monthly and annual energy bill reductions</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('energySavings')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Device Compatibility Checker</div>
                        <div class="resource-description">Ensure your smart devices work together in one ecosystem</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('compatibility-checker')">Interactive Form</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Smart Home Budget Planner</div>
                        <div class="resource-description">Phase-by-phase investment planning by room and priority</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('smart-home-budget')">Interactive Form</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Finance Resources -->
            <div class="resource-category finance" id="finance">
                <div class="category-icon">üí∞</div>
                <h2 class="category-title">Financial Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Emergency Fund Calculator</div>
                        <div class="resource-description">Calculate your exact emergency fund target based on essential expenses</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('emergencyFund')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Debt Payoff Comparison</div>
                        <div class="resource-description">Compare snowball vs. avalanche methods with exact timelines</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('debtPayoff')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Net Worth Tracker</div>
                        <div class="resource-description">Track assets, liabilities, and net worth progress over time</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('net-worth-tracker')">Interactive Form</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Investment Allocation Calculator</div>
                        <div class="resource-description">Age-appropriate portfolio recommendations and rebalancing guide</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('investmentAllocation')">Use Calculator</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Estate Planning Resources -->
            <div class="resource-category estate-planning" id="estate">
                <div class="category-icon">üèõÔ∏è</div>
                <h2 class="category-title">Estate Planning Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Life Insurance Needs Calculator</div>
                        <div class="resource-description">Determine optimal coverage using income replacement and debt methods</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('lifeInsurance')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Estate Tax Estimator</div>
                        <div class="resource-description">Calculate potential federal and state estate tax liability</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('estateTax')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Digital Asset Inventory</div>
                        <div class="resource-description">Complete spreadsheet for cataloging all digital assets and access</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('digital-assets')">Interactive Form</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Beneficiary Tracking Template</div>
                        <div class="resource-description">Keep all beneficiary designations updated across all accounts</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('beneficiary-tracking')">Interactive Form</button>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Integration Resources -->
            <div class="resource-category integration" id="integration">
                <div class="category-icon">üåü</div>
                <h2 class="category-title">Integration Tools</h2>
                <ul class="resource-list">
                    <li class="resource-item">
                        <div class="resource-title">Complete Life Planning ROI</div>
                        <div class="resource-description">See how smart home, finance, and estate planning compound together</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openCalculator('lifePlanningROI')">Use Calculator</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Cross-Category Savings Tracker</div>
                        <div class="resource-description">Automatically redirect smart home savings to financial goals</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('savings-tracker')">Interactive Form</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">12-Month Integrated Action Plan</div>
                        <div class="resource-description">Coordinated timeline for smart home, finance, and estate planning</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('integrated-action-plan')">Interactive Form</button>
                        </div>
                    </li>
                    <li class="resource-item">
                        <div class="resource-title">Professional Team Contact Template</div>
                        <div class="resource-description">Organize all your advisors, contractors, and specialists</div>
                        <div class="resource-buttons">
                            <button class="btn btn-calculator" onclick="openTemplate('professional-team')">Interactive Form</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="contact-section">
            <h2>Need Personalized Help?</h2>
            <p>These free tools are just the beginning. Get customized planning that fits your unique situation.</p>
            <div class="contact-info">
                <div class="contact-item">
                    <div class="contact-icon">üìß</div>
                    <div><strong>Email</strong><br>info@kirijonesservices.com</div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">üåê</div>
                    <div><strong>Website</strong><br>kirijonesservices.com</div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">üì±</div>
                    <div><strong>Phone</strong><br>(555) 123-4567</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calculator Modals -->
    <div id="calculatorModal" class="calculator-modal">
        <div class="modal-content">
            <span class="close" onclick="closeCalculator()">&times;</span>
            <div id="calculatorContent">
                <!-- Calculator content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // Utility function to format numbers with commas
        function formatNumber(num) {
            return new Intl.NumberFormat('en-US').format(num);
        }

        // Utility function to format currency
        function formatCurrency(num) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(num);
        }

        // Template and calculator functions
        function openTemplate(templateType) {
            const modal = document.getElementById('calculatorModal');
            const content = document.getElementById('calculatorContent');
            
            const templates = {
                'compatibility-checker': {
                    title: 'Smart Device Compatibility Checker',
                    description: 'Track your smart home devices and ensure they work together seamlessly',
                    type: 'form',
                    content: createCompatibilityForm()
                },
                'smart-home-budget': {
                    title: 'Smart Home Budget Planner',
                    description: 'Plan your smart home investment phase by phase',
                    type: 'form',
                    content: createBudgetForm()
                },
                'net-worth-tracker': {
                    title: 'Net Worth Tracker',
                    description: 'Track your assets and liabilities to monitor financial progress',
                    type: 'form',
                    content: createNetWorthForm()
                },
                'digital-assets': {
                    title: 'Digital Asset Inventory',
                    description: 'Catalog all your digital assets for estate planning',
                    type: 'form',
                    content: createDigitalAssetsForm()
                },
                'beneficiary-tracking': {
                    title: 'Beneficiary Tracking',
                    description: 'Keep all beneficiary designations updated across accounts',
                    type: 'form',
                    content: createBeneficiaryForm()
                },
                'savings-tracker': {
                    title: 'Cross-Category Savings Tracker',
                    description: 'Track how smart home savings flow to other financial goals',
                    type: 'form',
                    content: createSavingsForm()
                },
                'integrated-action-plan': {
                    title: '12-Month Integrated Action Plan',
                    description: 'Coordinate your smart home, finance, and estate planning timeline',
                    type: 'form',
                    content: createActionPlanForm()
                },
                'professional-team': {
                    title: 'Professional Team Contacts',
                    description: 'Organize all your advisors, contractors, and specialists',
                    type: 'form',
                    content: createProfessionalTeamForm()
                }
            };
            
            const template = templates[templateType];
            if (!template) return;
            
            content.innerHTML = `
                <h2>${template.title}</h2>
                <p style="margin-bottom: 20px; color: #666; font-style: italic;">${template.description}</p>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-calculator" onclick="printTemplate()" style="margin-right: 10px;">üñ®Ô∏è Print/Save as PDF</button>
                    <button class="btn btn-download" onclick="exportTemplateData('${templateType}')" style="margin-right: 10px;">üìä Export Data</button>
                    <button class="btn btn-download" onclick="clearTemplateForm()">üóëÔ∏è Clear Form</button>
                </div>
                ${template.content}
            `;
            
            modal.style.display = 'block';
        }

        function openCalculator(calculatorType) {
            const modal = document.getElementById('calculatorModal');
            const content = document.getElementById('calculatorContent');
            
            // Define calculator content based on type
            const calculators = {
                smartHomeROI: {
                    title: 'Smart Home ROI Calculator',
                    fields: [
                        { name: 'totalInvestment', label: 'Total Smart Home Investment ($)', type: 'number', placeholder: '15,000' },
                        { name: 'currentEnergyBill', label: 'Current Monthly Energy Bill ($)', type: 'number', placeholder: '150' },
                        { name: 'expectedSavings', label: 'Expected Energy Savings (%)', type: 'number', value: '18', placeholder: '18' },
                        { name: 'insuranceDiscount', label: 'Insurance Discount (%)', type: 'number', value: '10', placeholder: '10' },
                        { name: 'currentInsurance', label: 'Current Annual Insurance Premium ($)', type: 'number', placeholder: '1,200' }
                    ],
                    calculate: calculateSmartHomeROI
                },
                energySavings: {
                    title: 'Energy Savings Estimator',
                    fields: [
                        { name: 'homeSize', label: 'Home Size (sq ft)', type: 'number', placeholder: '2,000' },
                        { name: 'currentBill', label: 'Current Monthly Energy Bill ($)', type: 'number', placeholder: '150' },
                        { name: 'homeAge', label: 'Home Age (years)', type: 'number', placeholder: '10' },
                        { name: 'climate', label: 'Climate Zone', type: 'select', options: ['Hot/Humid', 'Hot/Dry', 'Mixed', 'Cold', 'Very Cold'] }
                    ],
                    calculate: calculateEnergySavings
                },
                emergencyFund: {
                    title: 'Emergency Fund Calculator',
                    fields: [
                        { name: 'housing', label: 'Monthly Housing Costs ($)', type: 'number', placeholder: '1,500' },
                        { name: 'food', label: 'Monthly Food/Groceries ($)', type: 'number', placeholder: '600' },
                        { name: 'transportation', label: 'Monthly Transportation ($)', type: 'number', placeholder: '400' },
                        { name: 'utilities', label: 'Monthly Utilities ($)', type: 'number', placeholder: '200' },
                        { name: 'insurance', label: 'Monthly Insurance ($)', type: 'number', placeholder: '300' },
                        { name: 'debtPayments', label: 'Monthly Debt Payments ($)', type: 'number', placeholder: '500' },
                        { name: 'other', label: 'Other Essential Expenses ($)', type: 'number', placeholder: '200' }
                    ],
                    calculate: calculateEmergencyFund
                },
                debtPayoff: {
                    title: 'Debt Payoff Comparison Calculator',
                    fields: [
                        { name: 'debt1Balance', label: 'Debt 1 Balance ($)', type: 'number', placeholder: '5,000' },
                        { name: 'debt1Rate', label: 'Debt 1 Interest Rate (%)', type: 'number', placeholder: '18.5' },
                        { name: 'debt1Min', label: 'Debt 1 Minimum Payment ($)', type: 'number', placeholder: '125' },
                        { name: 'debt2Balance', label: 'Debt 2 Balance ($)', type: 'number', placeholder: '10,000' },
                        { name: 'debt2Rate', label: 'Debt 2 Interest Rate (%)', type: 'number', placeholder: '12.5' },
                        { name: 'debt2Min', label: 'Debt 2 Minimum Payment ($)', type: 'number', placeholder: '200' },
                        { name: 'extraPayment', label: 'Extra Payment Available ($)', type: 'number', placeholder: '300' }
                    ],
                    calculate: calculateDebtPayoff
                },
                investmentAllocation: {
                    title: 'Investment Allocation Calculator',
                    fields: [
                        { name: 'age', label: 'Your Age', type: 'number', placeholder: '35' },
                        { name: 'riskTolerance', label: 'Risk Tolerance', type: 'select', options: ['Conservative', 'Moderate', 'Aggressive'] },
                        { name: 'timeHorizon', label: 'Investment Time Horizon (years)', type: 'number', placeholder: '30' },
                        { name: 'currentSavings', label: 'Current Investment Balance ($)', type: 'number', placeholder: '25,000' }
                    ],
                    calculate: calculateInvestmentAllocation
                },
                lifeInsurance: {
                    title: 'Life Insurance Needs Calculator',
                    fields: [
                        { name: 'annualIncome', label: 'Annual Income ($)', type: 'number', placeholder: '75,000' },
                        { name: 'yearsIncome', label: 'Years of Income Replacement', type: 'number', value: '10', placeholder: '10' },
                        { name: 'mortgage', label: 'Remaining Mortgage ($)', type: 'number', placeholder: '250,000' },
                        { name: 'otherDebts', label: 'Other Debts ($)', type: 'number', placeholder: '15,000' },
                        { name: 'collegeExpenses', label: 'Children\'s College Expenses ($)', type: 'number', placeholder: '100,000' },
                        { name: 'finalExpenses', label: 'Final Expenses ($)', type: 'number', value: '15000', placeholder: '15,000' },
                        { name: 'existingInsurance', label: 'Existing Life Insurance ($)', type: 'number', placeholder: '100,000' }
                    ],
                    calculate: calculateLifeInsurance
                },
                estateTax: {
                    title: 'Estate Tax Estimator',
                    fields: [
                        { name: 'totalAssets', label: 'Total Estate Value ($)', type: 'number', placeholder: '2,500,000' },
                        { name: 'liabilities', label: 'Total Liabilities ($)', type: 'number', placeholder: '300,000' },
                        { name: 'state', label: 'State', type: 'select', options: ['No Estate Tax', 'Connecticut', 'Hawaii', 'Illinois', 'Maine', 'Maryland', 'Massachusetts', 'Minnesota', 'New York', 'Oregon', 'Rhode Island', 'Vermont', 'Washington'] },
                        { name: 'maritalStatus', label: 'Marital Status', type: 'select', options: ['Single', 'Married'] }
                    ],
                    calculate: calculateEstateTax
                },
                lifePlanningROI: {
                    title: 'Complete Life Planning ROI Calculator',
                    fields: [
                        { name: 'smartHomeInvestment', label: 'Smart Home Investment ($)', type: 'number', placeholder: '15,000' },
                        { name: 'energySavingsPercent', label: 'Energy Savings (%)', type: 'number', value: '18', placeholder: '18' },
                        { name: 'currentEnergyBill', label: 'Monthly Energy Bill ($)', type: 'number', placeholder: '150' },
                        { name: 'debtBalance', label: 'High-Interest Debt Balance ($)', type: 'number', placeholder: '15,000' },
                        { name: 'debtRate', label: 'Average Debt Interest Rate (%)', type: 'number', placeholder: '18' },
                        { name: 'investmentReturn', label: 'Expected Investment Return (%)', type: 'number', value: '7', placeholder: '7' },
                        { name: 'estatePlanningCost', label: 'Estate Planning Investment ($)', type: 'number', placeholder: '3,000' },
                        { name: 'estateTaxSavings', label: 'Potential Estate Tax Savings ($)', type: 'number', placeholder: '50,000' }
                    ],
                    calculate: calculateLifePlanningROI
                }
            };
            
            const calc = calculators[calculatorType];
            if (!calc) return;
            
            let html = `<h2>${calc.title}</h2><form class="calculator-form" onsubmit="event.preventDefault(); window.currentCalculate();">`;
            
            calc.fields.forEach(field => {
                if (field.type === 'select') {
                    html += `
                        <div class="form-group">
                            <label for="${field.name}">${field.label}</label>
                            <select id="${field.name}" name="${field.name}">
                                ${field.options.map(option => `<option value="${option}">${option}</option>`).join('')}
                            </select>
                        </div>
                    `;
                } else {
                    html += `
                        <div class="form-group">
                            <label for="${field.name}">${field.label}</label>
                            <input type="${field.type}" id="${field.name}" name="${field.name}" value="${field.value || ''}" placeholder="${field.placeholder || ''}" />
                        </div>
                    `;
                }
            });
            
            html += `
                <button type="submit" class="calculate-btn">Calculate</button>
                </form>
                <div id="results" class="results" style="display: none;"></div>
            `;
            
            content.innerHTML = html;
            
            // Store the calculate function for later use
            window.currentCalculate = calc.calculate;
            
            modal.style.display = 'block';
        }
        
        function closeCalculator() {
            document.getElementById('calculatorModal').style.display = 'none';
        }

        function showResults(results) {
            const resultsDiv = document.getElementById('results');
            let html = '';
            
            results.forEach(result => {
                html += `
                    <div class="result-item">
                        <span class="result-label">${result.label}:</span>
                        <span class="result-value">${result.value}</span>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
        }
        
        // Calculator implementations
        function calculateSmartHomeROI() {
            const investment = parseFloat(document.getElementById('totalInvestment').value) || 0;
            const energyBill = parseFloat(document.getElementById('currentEnergyBill').value) || 0;
            const savingsPercent = parseFloat(document.getElementById('expectedSavings').value) || 0;
            const insuranceDiscount = parseFloat(document.getElementById('insuranceDiscount').value) || 0;
            const insurancePremium = parseFloat(document.getElementById('currentInsurance').value) || 0;
            
            const monthlyEnergySavings = energyBill * (savingsPercent / 100);
            const annualEnergySavings = monthlyEnergySavings * 12;
            const annualInsuranceSavings = insurancePremium * (insuranceDiscount / 100);
            const totalAnnualSavings = annualEnergySavings + annualInsuranceSavings;
            const paybackYears = investment / totalAnnualSavings;
            const fiveYearSavings = (totalAnnualSavings * 5) - investment;
            
            showResults([
                { label: 'Monthly Energy Savings', value: formatCurrency(monthlyEnergySavings) },
                { label: 'Annual Energy Savings', value: formatCurrency(annualEnergySavings) },
                { label: 'Annual Insurance Savings', value: formatCurrency(annualInsuranceSavings) },
                { label: 'Total Annual Savings', value: formatCurrency(totalAnnualSavings) },
                { label: 'Payback Period', value: `${paybackYears.toFixed(1)} years` },
                { label: '5-Year Net Savings', value: formatCurrency(fiveYearSavings) }
            ]);
        }

        function calculateEnergySavings() {
            const homeSize = parseFloat(document.getElementById('homeSize').value) || 0;
            const currentBill = parseFloat(document.getElementById('currentBill').value) || 0;
            const homeAge = parseFloat(document.getElementById('homeAge').value) || 0;
            const climate = document.getElementById('climate').value;
            
            // Base savings percentage based on home characteristics
            let baseSavings = 15; // Base smart home savings
            
            // Adjust for home age (older homes save more)
            if (homeAge > 20) baseSavings += 5;
            else if (homeAge > 10) baseSavings += 3;
            
            // Adjust for climate
            const climateMultipliers = {
                'Hot/Humid': 1.3,
                'Hot/Dry': 1.2,
                'Mixed': 1.0,
                'Cold': 1.1,
                'Very Cold': 1.4
            };
            
            const adjustedSavings = baseSavings * (climateMultipliers[climate] || 1);
            const monthlySavings = currentBill * (adjustedSavings / 100);
            const annualSavings = monthlySavings * 12;
            const costPerSqFt = currentBill / homeSize;
            
            showResults([
                { label: 'Estimated Monthly Savings', value: formatCurrency(monthlySavings) },
                { label: 'Estimated Annual Savings', value: formatCurrency(annualSavings) },
                { label: 'Savings Percentage', value: `${adjustedSavings.toFixed(1)}%` },
                { label: 'Current Cost per Sq Ft', value: formatCurrency(costPerSqFt) },
                { label: '10-Year Savings Potential', value: formatCurrency(annualSavings * 10) }
            ]);
        }

        function calculateEmergencyFund() {
            const housing = parseFloat(document.getElementById('housing').value) || 0;
            const food = parseFloat(document.getElementById('food').value) || 0;
            const transportation = parseFloat(document.getElementById('transportation').value) || 0;
            const utilities = parseFloat(document.getElementById('utilities').value) || 0;
            const insurance = parseFloat(document.getElementById('insurance').value) || 0;
            const debtPayments = parseFloat(document.getElementById('debtPayments').value) || 0;
            const other = parseFloat(document.getElementById('other').value) || 0;
            
            const monthlyEssentials = housing + food + transportation + utilities + insurance + debtPayments + other;
            const threeMonthFund = monthlyEssentials * 3;
            const sixMonthFund = monthlyEssentials * 6;
            const nineMonthFund = monthlyEssentials * 9;
            
            showResults([
                { label: 'Monthly Essential Expenses', value: formatCurrency(monthlyEssentials) },
                { label: '3-Month Emergency Fund', value: formatCurrency(threeMonthFund) },
                { label: '6-Month Emergency Fund (Recommended)', value: formatCurrency(sixMonthFund) },
                { label: '9-Month Emergency Fund (Conservative)', value: formatCurrency(nineMonthFund) },
                { label: 'Weekly Savings Goal (6-month fund in 2 years)', value: formatCurrency(sixMonthFund / 104) }
            ]);
        }

        function calculateDebtPayoff() {
            const debt1Balance = parseFloat(document.getElementById('debt1Balance').value) || 0;
            const debt1Rate = parseFloat(document.getElementById('debt1Rate').value) || 0;
            const debt1Min = parseFloat(document.getElementById('debt1Min').value) || 0;
            const debt2Balance = parseFloat(document.getElementById('debt2Balance').value) || 0;
            const debt2Rate = parseFloat(document.getElementById('debt2Rate').value) || 0;
            const debt2Min = parseFloat(document.getElementById('debt2Min').value) || 0;
            const extraPayment = parseFloat(document.getElementById('extraPayment').value) || 0;
            
            // Snowball method (smallest balance first)
            let snowballMonths, snowballInterest;
            if (debt1Balance <= debt2Balance) {
                // Pay off debt1 first
                const debt1Payment = debt1Min + extraPayment;
                const debt1Months = Math.ceil(Math.log(1 + (debt1Balance * (debt1Rate/100/12)) / debt1Payment) / Math.log(1 + debt1Rate/100/12));
                const debt1TotalPaid = debt1Payment * debt1Months;
                const debt1Interest = debt1TotalPaid - debt1Balance;
                
                // Then debt2
                const debt2RemainingPayment = debt2Min + extraPayment + debt1Min;
                const debt2Months = Math.ceil(Math.log(1 + (debt2Balance * (debt2Rate/100/12)) / debt2RemainingPayment) / Math.log(1 + debt2Rate/100/12));
                const debt2TotalPaid = debt2RemainingPayment * debt2Months + (debt2Min * debt1Months);
                const debt2Interest = debt2TotalPaid - debt2Balance;
                
                snowballMonths = debt1Months + debt2Months;
                snowballInterest = debt1Interest + debt2Interest;
            } else {
                // Pay off debt2 first
                const debt2Payment = debt2Min + extraPayment;
                const debt2Months = Math.ceil(Math.log(1 + (debt2Balance * (debt2Rate/100/12)) / debt2Payment) / Math.log(1 + debt2Rate/100/12));
                const debt2TotalPaid = debt2Payment * debt2Months;
                const debt2Interest = debt2TotalPaid - debt2Balance;
                
                // Then debt1
                const debt1RemainingPayment = debt1Min + extraPayment + debt2Min;
                const debt1Months = Math.ceil(Math.log(1 + (debt1Balance * (debt1Rate/100/12)) / debt1RemainingPayment) / Math.log(1 + debt1Rate/100/12));
                const debt1TotalPaid = debt1RemainingPayment * debt1Months + (debt1Min * debt2Months);
                const debt1Interest = debt1TotalPaid - debt1Balance;
                
                snowballMonths = debt1Months + debt2Months;
                snowballInterest = debt1Interest + debt2Interest;
            }
            
            // Avalanche method (highest rate first)
            let avalancheMonths, avalancheInterest;
            if (debt1Rate >= debt2Rate) {
                // Pay off debt1 first
                const debt1Payment = debt1Min + extraPayment;
                const debt1Months = Math.ceil(Math.log(1 + (debt1Balance * (debt1Rate/100/12)) / debt1Payment) / Math.log(1 + debt1Rate/100/12));
                const debt1TotalPaid = debt1Payment * debt1Months;
                const debt1Interest = debt1TotalPaid - debt1Balance;
                
                // Then debt2
                const debt2RemainingPayment = debt2Min + extraPayment + debt1Min;
                const debt2Months = Math.ceil(Math.log(1 + (debt2Balance * (debt2Rate/100/12)) / debt2RemainingPayment) / Math.log(1 + debt2Rate/100/12));
                const debt2TotalPaid = debt2RemainingPayment * debt2Months + (debt2Min * debt1Months);
                const debt2Interest = debt2TotalPaid - debt2Balance;
                
                avalancheMonths = debt1Months + debt2Months;
                avalancheInterest = debt1Interest + debt2Interest;
            } else {
                // Pay off debt2 first
                const debt2Payment = debt2Min + extraPayment;
                const debt2Months = Math.ceil(Math.log(1 + (debt2Balance * (debt2Rate/100/12)) / debt2Payment) / Math.log(1 + debt2Rate/100/12));
                const debt2TotalPaid = debt2Payment * debt2Months;
                const debt2Interest = debt2TotalPaid - debt2Balance;
                
                // Then debt1
                const debt1RemainingPayment = debt1Min + extraPayment + debt2Min;
                const debt1Months = Math.ceil(Math.log(1 + (debt1Balance * (debt1Rate/100/12)) / debt1RemainingPayment) / Math.log(1 + debt1Rate/100/12));
                const debt1TotalPaid = debt1RemainingPayment * debt1Months + (debt1Min * debt2Months);
                const debt1Interest = debt1TotalPaid - debt1Balance;
                
                avalancheMonths = debt1Months + debt2Months;
                avalancheInterest = debt1Interest + debt2Interest;
            }
            
            const interestSavings = snowballInterest - avalancheInterest;
            const timeSavings = snowballMonths - avalancheMonths;
            
            showResults([
                { label: 'Snowball Method Timeline', value: `${snowballMonths} months` },
                { label: 'Snowball Total Interest', value: formatCurrency(snowballInterest) },
                { label: 'Avalanche Method Timeline', value: `${avalancheMonths} months` },
                { label: 'Avalanche Total Interest', value: formatCurrency(avalancheInterest) },
                { label: 'Interest Savings (Avalanche)', value: formatCurrency(interestSavings) },
                { label: 'Time Savings (Avalanche)', value: `${timeSavings} months` }
            ]);
        }

        function calculateInvestmentAllocation() {
            const age = parseInt(document.getElementById('age').value) || 0;
            const riskTolerance = document.getElementById('riskTolerance').value;
            const timeHorizon = parseInt(document.getElementById('timeHorizon').value) || 0;
            const currentSavings = parseFloat(document.getElementById('currentSavings').value) || 0;
            
            // Base allocation: 100 - age = stock percentage
            let stockPercent = 100 - age;
            
            // Adjust for risk tolerance
            const riskAdjustments = {
                'Conservative': -10,
                'Moderate': 0,
                'Aggressive': +10
            };
            
            stockPercent += riskAdjustments[riskTolerance] || 0;
            
            // Adjust for time horizon
            if (timeHorizon < 5) stockPercent -= 15;
            else if (timeHorizon > 30) stockPercent += 10;
            
            // Keep within reasonable bounds
            stockPercent = Math.max(20, Math.min(90, stockPercent));
            
            const bondPercent = 100 - stockPercent;
            const stockAllocation = currentSavings * (stockPercent / 100);
            const bondAllocation = currentSavings * (bondPercent / 100);
            
            showResults([
                { label: 'Recommended Stock Allocation', value: `${stockPercent}%` },
                { label: 'Recommended Bond Allocation', value: `${bondPercent}%` },
                { label: 'Current Stock Investment', value: formatCurrency(stockAllocation) },
                { label: 'Current Bond Investment', value: formatCurrency(bondAllocation) },
                { label: 'Risk Profile', value: riskTolerance },
                { label: 'Rebalance Frequency', value: 'Quarterly or when 5% off target' }
            ]);
        }

        function calculateLifeInsurance() {
            const annualIncome = parseFloat(document.getElementById('annualIncome').value) || 0;
            const yearsIncome = parseFloat(document.getElementById('yearsIncome').value) || 0;
            const mortgage = parseFloat(document.getElementById('mortgage').value) || 0;
            const otherDebts = parseFloat(document.getElementById('otherDebts').value) || 0;
            const collegeExpenses = parseFloat(document.getElementById('collegeExpenses').value) || 0;
            const finalExpenses = parseFloat(document.getElementById('finalExpenses').value) || 0;
            const existingInsurance = parseFloat(document.getElementById('existingInsurance').value) || 0;
            
            // Income replacement method
            const incomeReplacement = annualIncome * yearsIncome;
            
            // Debt and expense method
            const totalDebtsExpenses = mortgage + otherDebts + collegeExpenses + finalExpenses;
            
            // Take the higher of the two methods
            const totalNeed = Math.max(incomeReplacement, totalDebtsExpenses);
            const additionalNeeded = Math.max(0, totalNeed - existingInsurance);
            
            showResults([
                { label: 'Income Replacement Need', value: formatCurrency(incomeReplacement) },
                { label: 'Debt & Expense Coverage Need', value: formatCurrency(totalDebtsExpenses) },
                { label: 'Recommended Total Coverage', value: formatCurrency(totalNeed) },
                { label: 'Existing Coverage', value: formatCurrency(existingInsurance) },
                { label: 'Additional Coverage Needed', value: formatCurrency(additionalNeeded) },
                { label: 'Coverage Gap', value: additionalNeeded > 0 ? 'Yes - Additional insurance recommended' : 'No - Current coverage adequate' }
            ]);
        }

        function calculateEstateTax() {
            const totalAssets = parseFloat(document.getElementById('totalAssets').value) || 0;
            const liabilities = parseFloat(document.getElementById('liabilities').value) || 0;
            const state = document.getElementById('state').value;
            const maritalStatus = document.getElementById('maritalStatus').value;
            
            const netEstate = totalAssets - liabilities;
            
            // Federal exemption (2024/2025)
            const federalExemption = maritalStatus === 'Married' ? 27360000 : 13680000; // $13.68M individual, $27.36M married
            
            // Federal estate tax
            let federalTax = 0;
            if (netEstate > federalExemption) {
                federalTax = (netEstate - federalExemption) * 0.40; // 40% rate
            }
            
            // State estate tax (simplified - varies by state)
            let stateTax = 0;
            const stateExemptions = {
                'Connecticut': 12920000,
                'Hawaii': 5490000,
                'Illinois': 4000000,
                'Maine': 6410000,
                'Maryland': 5000000,
                'Massachusetts': 2000000,
                'Minnesota': 3000000,
                'New York': 6940000,
                'Oregon': 1000000,
                'Rhode Island': 1733264,
                'Vermont': 5000000,
                'Washington': 2193000
            };
            
            if (state !== 'No Estate Tax' && stateExemptions[state]) {
                const stateExemption = stateExemptions[state];
                if (netEstate > stateExemption) {
                    stateTax = (netEstate - stateExemption) * 0.16; // Average state rate
                }
            }
            
            const totalTax = federalTax + stateTax;
            const effectiveRate = (totalTax / netEstate) * 100;
            
            showResults([
                { label: 'Net Estate Value', value: formatCurrency(netEstate) },
                { label: 'Federal Exemption', value: formatCurrency(federalExemption) },
                { label: 'Federal Estate Tax', value: formatCurrency(federalTax) },
                { label: 'State Estate Tax', value: formatCurrency(stateTax) },
                { label: 'Total Estate Tax', value: formatCurrency(totalTax) },
                { label: 'Effective Tax Rate', value: `${effectiveRate.toFixed(2)}%` }
            ]);
        }

        function calculateLifePlanningROI() {
            const smartHomeInvestment = parseFloat(document.getElementById('smartHomeInvestment').value) || 0;
            const energySavingsPercent = parseFloat(document.getElementById('energySavingsPercent').value) || 0;
            const currentEnergyBill = parseFloat(document.getElementById('currentEnergyBill').value) || 0;
            const debtBalance = parseFloat(document.getElementById('debtBalance').value) || 0;
            const debtRate = parseFloat(document.getElementById('debtRate').value) || 0;
            const investmentReturn = parseFloat(document.getElementById('investmentReturn').value) || 0;
            const estatePlanningCost = parseFloat(document.getElementById('estatePlanningCost').value) || 0;
            const estateTaxSavings = parseFloat(document.getElementById('estateTaxSavings').value) || 0;
            
            // Smart home savings
            const monthlyEnergySavings = currentEnergyBill * (energySavingsPercent / 100);
            const annualEnergySavings = monthlyEnergySavings * 12;
            
            // Debt payoff acceleration (using energy savings)
            const monthlyDebtInterest = debtBalance * (debtRate / 100 / 12);
            const debtPayoffAcceleration = monthlyEnergySavings; // Redirect savings to debt
            
            // Investment growth from redirected savings
            const annualInvestmentContribution = annualEnergySavings;
            const twentyYearInvestmentValue = annualInvestmentContribution * (((1 + investmentReturn/100) ** 20 - 1) / (investmentReturn/100));
            
            // Total integrated savings
            const smartHomePayback = smartHomeInvestment / annualEnergySavings;
            const netEstateSavings = estateTaxSavings - estatePlanningCost;
            const totalInitialInvestment = smartHomeInvestment + estatePlanningCost;
            const twentyYearNetBenefit = (annualEnergySavings * 20) + twentyYearInvestmentValue + netEstateSavings - totalInitialInvestment;
            
            showResults([
                { label: 'Annual Energy Savings', value: formatCurrency(annualEnergySavings) },
                { label: 'Smart Home Payback Period', value: `${smartHomePayback.toFixed(1)} years` },
                { label: 'Monthly Debt Interest Saved', value: formatCurrency(monthlyDebtInterest) },
                { label: '20-Year Investment Growth', value: formatCurrency(twentyYearInvestmentValue) },
                { label: 'Net Estate Tax Savings', value: formatCurrency(netEstateSavings) },
                { label: 'Total 20-Year Net Benefit', value: formatCurrency(twentyYearNetBenefit) },
                { label: 'Total ROI', value: `${((twentyYearNetBenefit / totalInitialInvestment) * 100).toFixed(1)}%` }
            ]);
        }

        // Template download function
        function downloadTemplate(templateName) {
            // Create template content based on type
            const templates = {
                'compatibility-checker': createCompatibilityTemplate(),
                'smart-home-budget': createBudgetTemplate(),
                'net-worth-tracker': createNetWorthTemplate(),
                'digital-assets': createDigitalAssetsTemplate(),
                'beneficiary-tracking': createBeneficiaryTemplate(),
                'savings-tracker': createSavingsTemplate(),
                'integrated-action-plan': createActionPlanTemplate(),
                'professional-team': createProfessionalTeamTemplate()
            };
            
            const template = templates[templateName];
            if (!template) {
                alert('Template not found');
                return;
            }
            
            // Create and download CSV file
            const blob = new Blob([template.content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', template.filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Template creation functions
        function createCompatibilityTemplate() {
            const content = `Device Name,Brand,Category,Protocol,Hub Required,Compatible With,Price,Purchase Date,Notes
Smart Thermostat,Nest,Climate,WiFi/Thread,No,Google Assistant; Alexa,249,2024-01-15,Works with most HVAC systems
Smart Doorbell,Ring,Security,WiFi,No,Alexa,199,2024-02-01,Requires wired doorbell
Smart Lights,Philips Hue,Lighting,Zigbee,Yes,All major platforms,299,2024-02-15,Starter kit with 4 bulbs
Smart Lock,August,Security,WiFi/Bluetooth,No,Google; Alexa; Apple HomeKit,229,2024-03-01,Works with existing deadbolt
Smart Speaker,Amazon Echo,Hub,WiFi,No,Alexa ecosystem,99,2024-01-20,Central control hub`;
            
            return {
                filename: 'device-compatibility-checker.csv',
                content: content
            };
        }

        function createBudgetTemplate() {
            const content = `Phase,Room/Area,Device Category,Specific Device,Estimated Cost,Priority (1-5),Timeline,ROI Timeline,Notes
1,Living Room,Lighting,Smart LED Bulbs (4),120,5,Month 1,Immediate,Start with high-use area
1,Living Room,Climate,Smart Thermostat,249,5,Month 1,2-3 months,Biggest energy savings
1,Entry,Security,Smart Doorbell,199,4,Month 2,Immediate,Security & convenience
2,Bedrooms,Lighting,Smart Switches (3),180,3,Month 3,3-6 months,Convenience upgrade
2,Kitchen,Appliances,Smart Outlets (4),80,3,Month 4,Variable,Monitor energy usage
3,Whole Home,Hub,Smart Hub,129,4,Month 5,Immediate,Integrate all devices
3,Garage,Security,Smart Garage Opener,199,2,Month 6,Convenience,Nice to have upgrade
Total Phase 1,,,,,1,156,,$568,Critical foundations
Total Phase 2,,,,,2,260,$828,Comfort improvements  
Total Phase 3,,,,,3,328,$1156,Advanced features`;
            
            return {
                filename: 'smart-home-budget-planner.csv',
                content: content
            };
        }

        function createNetWorthTemplate() {
            const content = `Date,Asset Category,Asset Description,Value,Liability Category,Liability Description,Balance,Net Worth
2024-01-01,Cash,Checking Account,5000,Credit Card,Visa Card,2500,
2024-01-01,Cash,Savings Account,15000,Credit Card,Mastercard,1800,
2024-01-01,Investment,401k,75000,Mortgage,Primary Residence,285000,
2024-01-01,Investment,IRA,25000,Auto Loan,Car Payment,18000,
2024-01-01,Investment,Brokerage Account,12000,Student Loan,Education Debt,12000,
2024-01-01,Real Estate,Primary Residence,450000,,,,$247700
2024-01-01,Personal,Vehicles,35000,,,,
2024-01-01,Personal,Household Items,25000,,,,
2024-04-01,Cash,Checking Account,5500,Credit Card,Visa Card,2200,
2024-04-01,Cash,Savings Account,18000,Credit Card,Mastercard,1500,
2024-04-01,Investment,401k,78000,Mortgage,Primary Residence,282000,`;
            
            return {
                filename: 'net-worth-tracker.csv',
                content: content
            };
        }

        function createDigitalAssetsTemplate() {
            const content = `Asset Type,Platform/Service,Username/Account,Email Associated,Password Location,2FA Method,Recovery Codes Location,Estimated Value,Beneficiary Access,Notes
Social Media,Facebook,johnsmith,john@email.com,Password Manager,Phone App,Safe Deposit Box,N/A,Spouse has access,Memorial account option available
Social Media,Instagram,johnsmith,john@email.com,Password Manager,Phone App,Safe Deposit Box,N/A,Spouse has access,Linked to Facebook
Financial,Bank of America,johnsmith,john@email.com,Password Manager,SMS + Email,Safe Deposit Box,25000,Joint account,Primary checking
Financial,Vanguard,john.smith,john@email.com,Password Manager,Phone App,Safe Deposit Box,125000,Designated beneficiary,401k account
Cryptocurrency,Coinbase,johnsmith,john@email.com,Password Manager,Phone App,Hardware wallet,5000,Private keys in safe,Hardware wallet location noted
Email,Gmail,john@email.com,john@email.com,Password Manager,Phone App,Safe Deposit Box,N/A,Spouse has access,Primary email account
Cloud Storage,Google Drive,john@email.com,john@email.com,Password Manager,Phone App,Safe Deposit Box,N/A,Shared with spouse,Family photos and documents
Subscription,Netflix,john@email.com,john@email.com,Password Manager,None,N/A,180/year,Family plan,Cancel if not needed`;
            
            return {
                filename: 'digital-asset-inventory.csv',
                content: content
            };
        }

        function createBeneficiaryTemplate() {
            const content = `Account Type,Institution,Account Number,Primary Beneficiary,Primary %,Primary SSN,Contingent Beneficiary,Contingent %,Contingent SSN,Last Updated,Next Review Date
401k,Vanguard,****1234,Jane Smith (Spouse),100%,***-**-5678,John Smith Jr (Son),100%,***-**-9012,2024-01-15,2025-01-15
IRA,Fidelity,****5678,Jane Smith (Spouse),100%,***-**-5678,John Smith Jr (Son),100%,***-**-9012,2024-01-15,2025-01-15
Life Insurance,State Farm,POL123456,Jane Smith (Spouse),100%,***-**-5678,John Smith Jr (Son),100%,***-**-9012,2024-02-01,2025-02-01
Bank Account,Chase,****9012,Jane Smith (Spouse),100%,***-**-5678,John Smith Jr (Son),100%,***-**-9012,2024-01-15,2025-01-15
Brokerage,E*Trade,****3456,Jane Smith (Spouse),50%,***-**-5678,John Smith Jr (Son),25%,***-**-9012,2024-01-15,2025-01-15
Brokerage,E*Trade,****3456,Sarah Smith (Daughter),25%,***-**-3456,,,,,2024-01-15,2025-01-15`;
            
            return {
                filename: 'beneficiary-tracking-template.csv',
                content: content
            };
        }

        function createSavingsTemplate() {
            const content = `Month,Smart Home Energy Savings,Insurance Discount Savings,Total Smart Home Savings,Debt Payment (Extra),Investment Contribution,Emergency Fund Addition,Running Total Debt Reduction,Running Investment Balance,Notes
January,27,10,37,37,0,0,37,0,Redirect all savings to high-interest debt first
February,27,10,37,37,0,0,74,0,Continue debt focus
March,27,10,37,37,0,0,111,0,Debt reduction gaining momentum
April,27,10,37,37,0,0,148,0,Quarter 1 complete
May,27,10,37,37,0,0,185,0,Debt payoff target: Month 18
June,27,10,37,37,0,0,222,0,Halfway through year 1
July,27,10,37,37,0,0,259,0,Summer energy savings peak
August,27,10,37,37,0,0,296,0,Maintain consistency
September,27,10,37,37,0,0,333,0,Back to school season
October,27,10,37,37,0,0,370,0,Heating season begins
November,27,10,37,37,0,0,407,0,Holiday spending - stay on track
December,27,10,37,37,0,0,444,0,Year 1 complete - $444 debt reduction`;
            
            return {
                filename: 'cross-category-savings-tracker.csv',
                content: content
            };
        }

        function createActionPlanTemplate() {
            const content = `Month,Smart Home Action,Finance Action,Estate Planning Action,Integration Notes,Estimated Cost,Expected Savings Start,Status
1,Install smart thermostat,Set up emergency fund auto-transfer,Research estate planning attorneys,Energy savings fund debt payoff,$249,Month 2,Pending
2,Add smart lighting (living areas),Open high-yield savings account,Schedule estate planning consultation,Track first month savings,$120,Month 2,Pending
3,Install smart doorbell,Review insurance policies,Complete will and basic documents,Redirect insurance savings,$199,Month 3,Pending
4,Smart switches in bedrooms,Increase 401k contribution,Set up healthcare directives,Optimize energy savings pattern,$180,Month 4,Pending
5,Smart outlets for monitoring,Debt consolidation review,Review beneficiary designations,Mid-year progress review,$80,Month 5,Pending
6,Add smart hub for integration,Investment allocation review,Update life insurance if needed,System integration complete,$129,Month 6,Pending
7,Garage door automation,Emergency fund milestone check,Trust evaluation (if applicable),Summer energy peak analysis,$199,Month 7,Pending
8,Smart water monitoring,Portfolio rebalancing,Digital asset documentation,Prepare for fall energy patterns,$150,Month 8,Pending
9,Security system expansion,Tax planning review,Estate plan annual review,Q3 savings analysis,$300,Month 9,Pending
10,Smart appliance upgrades,Holiday spending plan,Beneficiary communication,Winter preparation,$250,Month 10,Pending
11,System optimization,Year-end tax strategies,Professional team coordination,Analyze full year impact,$100,Month 11,Pending
12,Annual review and expansion,Annual financial review,Estate plan updates,Plan Year 2 integration,$200,Month 12,Pending`;
            
            return {
                filename: 'integrated-action-plan.csv',
                content: content
            };
        }

        function createProfessionalTeamTemplate() {
            const content = `Professional Type,Name,Company,Phone,Email,Specialization,Last Contact,Next Scheduled,Services Used,Notes
Estate Planning Attorney,,[Attorney Name],(555) 123-4567,attorney@lawfirm.com,Wills & Trusts,2024-06-15,2025-06-15,Will preparation,Annual review scheduled
Financial Advisor,,[Advisor Name],(555) 234-5678,advisor@financial.com,Retirement Planning,2024-03-20,2024-09-20,Portfolio review,Quarterly meetings
Tax Professional,,[CPA Name],(555) 345-6789,cpa@taxfirm.com,Tax Planning,2024-04-15,2025-02-15,Annual tax prep,Year-end planning meeting
Insurance Agent,,[Agent Name],(555) 456-7890,agent@insurance.com,Life & Property,2024-05-10,2025-05-10,Policy review,Annual check-in
Smart Home Installer,,[Installer Name],(555) 567-8901,install@smarthome.com,Home Automation,2024-01-30,As needed,Thermostat installation,Warranty support available
Electrician,,[Electrician Name],(555) 678-9012,electric@services.com,Residential Electric,2024-02-15,As needed,Smart switch installation,Smart home certified
HVAC Technician,,[HVAC Name],(555) 789-0123,hvac@services.com,Heating & Cooling,2024-03-01,2024-09-01,Smart thermostat setup,Bi-annual maintenance
Mortgage Lender,,[Lender Name],(555) 890-1234,lender@mortgage.com,Home Loans,2024-01-10,As needed,Refinance consultation,Rate monitoring service`;
            
            return {
                filename: 'professional-team-contacts.csv',
                content: content
            };
        }

        // Smooth scrolling for navigation
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('calculatorModal');
            if (event.target == modal) {
                closeCalculator();
            }
        }
    </script>
</body>
</html>
